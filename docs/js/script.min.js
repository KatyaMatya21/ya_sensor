var buttonMenu=document.querySelector(".js-menu-button"),menu=document.querySelector(".header-menu");buttonMenu.addEventListener("click",function(){menu.classList.toggle("header-menu--opened")});var data,grid=document.querySelector(".grid"),template=document.querySelector("#moduleTemplate"),moduleTemplate=template.content.querySelector(".module"),modulePicture=template.content.querySelector(".module__picture"),xhr=new XMLHttpRequest;xhr.open("GET","events.json",!1),xhr.send(),200!=xhr.status?alert(xhr.status+": "+xhr.statusText):data=JSON.parse(xhr.responseText);var events=data.events;function createElementFromHTML(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function parseTemplate(e,t){var r=e.outerHTML;return Object.keys(t).forEach(function(e){null===t[e]&&(t[e]=""),r=r.replace("{{ "+e+" }}",t[e])}),createElementFromHTML(r)}for(var i=0;i<events.length;i++){var module=moduleTemplate.cloneNode(!0);if(module=parseTemplate(moduleTemplate,events[i]),""===events[i].description&&module.querySelector(".module__message").classList.add("module__message--disabled"),"data"in events[i]&&"cam"===events[i].icon){var picture=modulePicture.cloneNode(!0);module.querySelector(".module__message").appendChild(picture)}grid.appendChild(module)}var imageContainer=document.querySelector(".module__picture"),image=document.querySelector(".module__image"),imageWindow=imageContainer.offsetWidth,imageWidth=image.offsetWidth;image.style.left="0px";var pointerArray=[],distancePrev=0,moveToStartPosition=function(){imageWindow=imageContainer.offsetWidth,image.style.left="0px"};window.addEventListener("resize",function(){moveToStartPosition()}),imageContainer.addEventListener("pointerdown",function(e){imageContainer.setPointerCapture(e.pointerId),pointerArray.push({id:e.pointerId,prevPosition:{x:e.x,y:e.y},currentPosition:{x:e.x,y:e.y}}),console.log("down")}),imageContainer.addEventListener("pointermove",function(e){if(0!==pointerArray.length){for(var t=null,r=0;r<pointerArray.length;r++)if(pointerArray[r].id===e.pointerId){t=r;break}if(pointerArray[t].currentPosition.x=e.x,pointerArray[t].currentPosition.y=e.y,console.log("move"),1<pointerArray.length){var n=pointerArray[0].currentPosition.x,o=pointerArray[0].currentPosition.y,i=pointerArray[1].currentPosition.x,a=pointerArray[1].currentPosition.y,d=Math.sqrt(Math.pow(i-n)+Math.pow(a-o));u&&(document.querySelector("body").style.background=u<d?"red":"blue");var u=d;document.querySelector(".debug").innerHTML=u}else{var l=pointerArray[t].prevPosition.x,m=e.x,s=m-l,c=1*image.style.left.replace("px","");0<s?c+=Math.abs(s):c-=Math.abs(s),0<c&&(c=0),c<imageWindow-imageWidth&&(c=imageWindow-imageWidth),image.style.left=c+"px",pointerArray[t].prevPosition.x=m}}}),imageContainer.addEventListener("pointerup",function(e){for(var t=null,r=0;r<pointerArray.length;r++)pointerArray[r].id===e.pointerId&&(t=r);pointerArray.splice(pointerArray[t],1),console.log("up")}),imageContainer.addEventListener("pointercancel",moveToStartPosition);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJidXR0b25NZW51IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJkYXRhIiwiZ3JpZCIsInRlbXBsYXRlIiwibW9kdWxlVGVtcGxhdGUiLCJjb250ZW50IiwibW9kdWxlUGljdHVyZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNlbmQiLCJzdGF0dXMiLCJhbGVydCIsInN0YXR1c1RleHQiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJldmVudHMiLCJjcmVhdGVFbGVtZW50RnJvbUhUTUwiLCJodG1sU3RyaW5nIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInRyaW0iLCJmaXJzdENoaWxkIiwicGFyc2VUZW1wbGF0ZSIsInZhcmlhYmxlcyIsInJlc3VsdCIsIm91dGVySFRNTCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwicmVwbGFjZSIsImkiLCJsZW5ndGgiLCJtb2R1bGUiLCJjbG9uZU5vZGUiLCJkZXNjcmlwdGlvbiIsImFkZCIsImljb24iLCJwaWN0dXJlIiwiYXBwZW5kQ2hpbGQiLCJpbWFnZUNvbnRhaW5lciIsImltYWdlIiwiaW1hZ2VXaW5kb3ciLCJvZmZzZXRXaWR0aCIsImltYWdlV2lkdGgiLCJzdHlsZSIsImxlZnQiLCJwb2ludGVyQXJyYXkiLCJkaXN0YW5jZVByZXYiLCJtb3ZlVG9TdGFydFBvc2l0aW9uIiwid2luZG93IiwiZXZlbnQiLCJzZXRQb2ludGVyQ2FwdHVyZSIsInBvaW50ZXJJZCIsInB1c2giLCJpZCIsInByZXZQb3NpdGlvbiIsIngiLCJ5IiwiY3VycmVudFBvc2l0aW9uIiwiY29uc29sZSIsImxvZyIsImluZGV4IiwiY3VycmVudFBvc2l0aW9uWDEiLCJjdXJyZW50UG9zaXRpb25ZMSIsImN1cnJlbnRQb3NpdGlvblgyIiwiY3VycmVudFBvc2l0aW9uWTIiLCJkaXN0YW5jZSIsIk1hdGgiLCJzcXJ0IiwicG93IiwiYmFja2dyb3VuZCIsInN0YXJ0WCIsImR4IiwiYWJzIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxXQUFhQyxTQUFTQyxjQUFjLG1CQUNwQ0MsS0FBT0YsU0FBU0MsY0FBYyxnQkFFbENGLFdBQVdJLGlCQUFpQixRQUFTLFdBQ25DRCxLQUFLRSxVQUFVQyxPQUFPLHlCQUd4QixJQU9JQyxLQVBBQyxLQUFPUCxTQUFTQyxjQUFjLFNBRTlCTyxTQUFXUixTQUFTQyxjQUFjLG1CQUVsQ1EsZUFBaUJELFNBQVNFLFFBQVFULGNBQWMsV0FDaERVLGNBQWdCSCxTQUFTRSxRQUFRVCxjQUFjLG9CQUkvQ1csSUFBTSxJQUFJQyxlQUNkRCxJQUFJRSxLQUFLLE1BQU8sZUFBZSxHQUMvQkYsSUFBSUcsT0FDYyxLQUFkSCxJQUFJSSxPQUNOQyxNQUFPTCxJQUFJSSxPQUFTLEtBQU9KLElBQUlNLFlBRS9CWixLQUFPYSxLQUFLQyxNQUFNUixJQUFJUyxjQUd4QixJQUFJQyxPQUFTaEIsS0FBS2dCLE9BRWxCLFNBQVNDLHNCQUFzQkMsR0FDN0IsSUFBSUMsRUFBTXpCLFNBQVMwQixjQUFjLE9BRWpDLE9BREFELEVBQUlFLFVBQVlILEVBQVdJLE9BQ3BCSCxFQUFJSSxXQUdiLFNBQVNDLGNBQWN0QixFQUFVdUIsR0FDL0IsSUFBSUMsRUFBU3hCLEVBQVN5QixVQU90QixPQU5BQyxPQUFPQyxLQUFLSixHQUFXSyxRQUFRLFNBQVVDLEdBQ2hCLE9BQW5CTixFQUFVTSxLQUNaTixFQUFVTSxHQUFPLElBRW5CTCxFQUFTQSxFQUFPTSxRQUFRLE1BQVFELEVBQU0sTUFBT04sRUFBVU0sTUFFbERkLHNCQUFzQlMsR0FHL0IsSUFBSyxJQUFJTyxFQUFJLEVBQUdBLEVBQUlqQixPQUFPa0IsT0FBUUQsSUFBSyxDQUV0QyxJQUFJRSxPQUFTaEMsZUFBZWlDLFdBQVUsR0FPdEMsR0FOQUQsT0FBU1gsY0FBY3JCLGVBQWdCYSxPQUFPaUIs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QUFJLFFBR2RyQixlQUFlN0MsaUJBQWlCLGdCQUFpQnNEIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYnV0dG9uTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZW51LWJ1dHRvbicpO1xudmFyIG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLW1lbnUnKTtcblxuYnV0dG9uTWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItbWVudS0tb3BlbmVkJyk7XG59KTtcblxudmFyIGdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZCcpO1xuXG52YXIgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kdWxlVGVtcGxhdGUnKTtcblxudmFyIG1vZHVsZVRlbXBsYXRlID0gdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKCcubW9kdWxlJyk7XG52YXIgbW9kdWxlUGljdHVyZSA9IHRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLm1vZHVsZV9fcGljdHVyZScpO1xuXG52YXIgZGF0YTtcblxudmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xueGhyLm9wZW4oJ0dFVCcsICdldmVudHMuanNvbicsIGZhbHNlKTtcbnhoci5zZW5kKCk7XG5pZiAoeGhyLnN0YXR1cyAhPSAyMDApIHtcbiAgYWxlcnQoIHhoci5zdGF0dXMgKyAnOiAnICsgeGhyLnN0YXR1c1RleHQgKTtcbn0gZWxzZSB7XG4gIGRhdGEgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xufVxuXG52YXIgZXZlbnRzID0gZGF0YS5ldmVudHM7XG5cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRGcm9tSFRNTChodG1sU3RyaW5nKSB7XG4gIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGl2LmlubmVySFRNTCA9IGh0bWxTdHJpbmcudHJpbSgpO1xuICByZXR1cm4gZGl2LmZpcnN0Q2hpbGQ7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHZhcmlhYmxlcykge1xuICB2YXIgcmVzdWx0ID0gdGVtcGxhdGUub3V0ZXJIVE1MO1xuICBPYmplY3Qua2V5cyh2YXJpYWJsZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIGlmICh2YXJpYWJsZXNba2V5XSA9PT0gbnVsbCkge1xuICAgICAgdmFyaWFibGVzW2tleV0gPSAnJztcbiAgICB9XG4gICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoJ3t7ICcgKyBrZXkgKyAnIH19JywgdmFyaWFibGVzW2tleV0pO1xuICB9KTtcbiAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRGcm9tSFRNTChyZXN1bHQpO1xufVxuXG5mb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXG4gIHZhciBtb2R1bGUgPSBtb2R1bGVUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIG1vZHVsZSA9IHBhcnNlVGVtcGxhdGUobW9kdWxlVGVtcGxhdGUsIGV2ZW50c1tpXSk7XG5cbiAgaWYgKGV2ZW50c1tpXS5kZXNjcmlwdGlvbiA9PT0gJycpIHtcbiAgICBtb2R1bGUucXVlcnlTZWxlY3RvcignLm1vZHVsZV9fbWVzc2FnZScpLmNsYXNzTGlzdC5hZGQoJ21vZHVsZV9fbWVzc2FnZS0tZGlzYWJsZWQnKTtcbiAgfVxuXG4gIGlmICgnZGF0YScgaW4gZXZlbnRzW2ldKSB7XG5cbiAgICBpZiAoZXZlbnRzW2ldLmljb24gPT09ICdjYW0nKSB7XG4gICAgICB2YXIgcGljdHVyZSA9IG1vZHVsZVBpY3R1cmUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgbW9kdWxlLnF1ZXJ5U2VsZWN0b3IoJy5tb2R1bGVfX21lc3NhZ2UnKS5hcHBlbmRDaGlsZChwaWN0dXJlKTtcbiAgICB9XG5cbiAgfVxuXG4gIGdyaWQuYXBwZW5kQ2hpbGQobW9kdWxlKTtcbn1cblxudmFyIGltYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZHVsZV9fcGljdHVyZScpO1xudmFyIGltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZHVsZV9faW1hZ2UnKTtcblxudmFyIGltYWdlV2luZG93ID0gaW1hZ2VDb250YWluZXIub2Zmc2V0V2lkdGg7XG52YXIgaW1hZ2VXaWR0aCA9IGltYWdlLm9mZnNldFdpZHRoO1xuXG5pbWFnZS5zdHlsZS5sZWZ0ID0gJzBweCc7XG5cbnZhciBwb2ludGVyQXJyYXkgPSBbXTtcbnZhciBkaXN0YW5jZVByZXYgPSAwO1xuXG52YXIgbW92ZVRvU3RhcnRQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICBpbWFnZVdpbmRvdyA9IGltYWdlQ29udGFpbmVyLm9mZnNldFdpZHRoO1xuICBpbWFnZS5zdHlsZS5sZWZ0ID0gJzBweCc7XG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gIG1vdmVUb1N0YXJ0UG9zaXRpb24oKTtcbn0pO1xuXG5pbWFnZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICBpbWFnZUNvbnRhaW5lci5zZXRQb2ludGVyQ2FwdHVyZShldmVudC5wb2ludGVySWQpO1xuXG4gIHBvaW50ZXJBcnJheS5wdXNoKHtcbiAgICBpZDogZXZlbnQucG9pbnRlcklkLFxuICAgIHByZXZQb3NpdGlvbjoge1xuICAgICAgeDogZXZlbnQueCxcbiAgICAgIHk6IGV2ZW50LnlcbiAgICB9LFxuICAgIGN1cnJlbnRQb3NpdGlvbjoge1xuICAgICAgeDogZXZlbnQueCxcbiAgICAgIHk6IGV2ZW50LnlcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKFwiZG93blwiKTtcbn0pO1xuXG5pbWFnZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICBpZiAocG9pbnRlckFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIGluZGV4ID0gbnVsbDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50ZXJBcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwb2ludGVyQXJyYXlbaV0uaWQgPT09IGV2ZW50LnBvaW50ZXJJZCkge1xuICAgICAgaW5kZXggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcG9pbnRlckFycmF5W2luZGV4XS5jdXJyZW50UG9zaXRpb24ueCA9IGV2ZW50Lng7XG4gIHBvaW50ZXJBcnJheVtpbmRleF0uY3VycmVudFBvc2l0aW9uLnkgPSBldmVudC55O1xuXG4gIGNvbnNvbGUubG9nKFwibW92ZVwiKTtcblxuICBpZiAocG9pbnRlckFycmF5Lmxlbmd0aCA+IDEpIHtcblxuICAgIHZhciBjdXJyZW50UG9zaXRpb25YMSA9IHBvaW50ZXJBcnJheVswXS5jdXJyZW50UG9zaXRpb24ueDtcbiAgICB2YXIgY3VycmVudFBvc2l0aW9uWTEgPSBwb2ludGVyQXJyYXlbMF0uY3VycmVudFBvc2l0aW9uLnk7XG4gICAgdmFyIGN1cnJlbnRQb3NpdGlvblgyID0gcG9pbnRlckFycmF5WzFdLmN1cnJlbnRQb3NpdGlvbi54O1xuICAgIHZhciBjdXJyZW50UG9zaXRpb25ZMiA9IHBvaW50ZXJBcnJheVsxXS5jdXJyZW50UG9zaXRpb24ueTtcblxuICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhjdXJyZW50UG9zaXRpb25YMiAtIGN1cnJlbnRQb3NpdGlvblgxKSArIE1hdGgucG93KGN1cnJlbnRQb3NpdGlvblkyIC0gY3VycmVudFBvc2l0aW9uWTEpKTtcblxuICAgIGlmIChkaXN0YW5jZVByZXYpIHtcblxuICAgICAgaWYgKGRpc3RhbmNlID4gZGlzdGFuY2VQcmV2KSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JlZCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jykuc3R5bGUuYmFja2dyb3VuZCA9ICdibHVlJztcbiAgICAgIH1cblxuICAgIH1cblxuICAgIHZhciBkaXN0YW5jZVByZXYgPSBkaXN0YW5jZTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZWJ1ZycpLmlubmVySFRNTCA9IGRpc3RhbmNlUHJldjtcblxuICB9IGVsc2Uge1xuXG4gICAgLy8gbW92ZVxuICAgIHZhciBzdGFydFggPSBwb2ludGVyQXJyYXlbaW5kZXhdLnByZXZQb3NpdGlvbi54O1xuICAgIHZhciB4ID0gZXZlbnQueDtcbiAgICB2YXIgZHggPSB4IC0gc3RhcnRYO1xuICAgIHZhciBsZWZ0ID0gaW1hZ2Uuc3R5bGUubGVmdC5yZXBsYWNlKCdweCcsICcnKSAqIDE7XG5cbiAgICBkeCA+IDAgPyBsZWZ0ICs9IE1hdGguYWJzKGR4KSA6IGxlZnQgLT0gTWF0aC5hYnMoZHgpO1xuXG4gICAgaWYgKGxlZnQgPiAwKSB7XG4gICAgICBsZWZ0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAobGVmdCA8IGltYWdlV2luZG93IC0gaW1hZ2VXaWR0aCkge1xuICAgICAgbGVmdCA9IGltYWdlV2luZG93IC0gaW1hZ2VXaWR0aDtcbiAgICB9XG5cbiAgICBpbWFnZS5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7XG4gICAgcG9pbnRlckFycmF5W2luZGV4XS5wcmV2UG9zaXRpb24ueCA9IHg7XG4gIH1cbn0pO1xuXG5pbWFnZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgdmFyIGluZGV4ID0gbnVsbDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50ZXJBcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwb2ludGVyQXJyYXlbaV0uaWQgPT09IGV2ZW50LnBvaW50ZXJJZCkge1xuICAgICAgaW5kZXggPSBpO1xuICAgIH1cbiAgfVxuXG4gIHBvaW50ZXJBcnJheS5zcGxpY2UocG9pbnRlckFycmF5W2luZGV4XSwgMSk7XG5cbiAgY29uc29sZS5sb2coXCJ1cFwiKTtcbn0pO1xuXG5pbWFnZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyY2FuY2VsJywgbW92ZVRvU3RhcnRQb3NpdGlvbik7XG5cbiJdfQ==
