var buttonMenu=document.querySelector(".js-menu-button"),menu=document.querySelector(".header-menu");buttonMenu.addEventListener("click",function(){menu.classList.toggle("header-menu--opened")});var data,grid=document.querySelector(".grid"),template=document.querySelector("#moduleTemplate"),moduleTemplate=template.content.querySelector(".module"),modulePicture=template.content.querySelector(".module__picture"),xhr=new XMLHttpRequest;xhr.open("GET","events.json",!1),xhr.send(),200!=xhr.status?alert(xhr.status+": "+xhr.statusText):data=JSON.parse(xhr.responseText);var events=data.events;function createElementFromHTML(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function parseTemplate(e,t){var r=e.outerHTML;return Object.keys(t).forEach(function(e){null===t[e]&&(t[e]=""),r=r.replace("{{ "+e+" }}",t[e])}),createElementFromHTML(r)}for(var i=0;i<events.length;i++){var module=moduleTemplate.cloneNode(!0);if(module=parseTemplate(moduleTemplate,events[i]),""===events[i].description&&module.querySelector(".module__message").classList.add("module__message--disabled"),"data"in events[i]&&"cam"===events[i].icon){var picture=modulePicture.cloneNode(!0);module.querySelector(".module__message").appendChild(picture)}grid.appendChild(module)}var imageContainer=document.querySelector(".module__picture"),image=document.querySelector(".module__image"),imageWindow=imageContainer.offsetWidth,imageWidth=image.offsetWidth,pointerArray=[],distancePrev=0,currentScale=1;image.style.left="0px",image.style.transform="scale("+currentScale+")";var moveToStartPosition=function(){imageWindow=imageContainer.offsetWidth,image.style.left="0px",imageWindow=imageContainer.offsetWidth,imageWidth=image.offsetWidth};window.addEventListener("resize",function(){moveToStartPosition()}),imageContainer.addEventListener("pointerdown",function(e){imageContainer.setPointerCapture(e.pointerId),pointerArray.push({id:e.pointerId,prevPosition:{x:e.x,y:e.y},currentPosition:{x:e.x,y:e.y}})}),imageContainer.addEventListener("pointermove",function(e){if(0!==pointerArray.length){for(var t=null,r=0;r<pointerArray.length;r++)if(pointerArray[r].id===e.pointerId){t=r;break}if(pointerArray[t].currentPosition.x=e.x,pointerArray[t].currentPosition.y=e.y,1<pointerArray.length){var n=pointerArray[0].currentPosition.x,i=pointerArray[0].currentPosition.y,o=pointerArray[1].currentPosition.x,a=pointerArray[1].currentPosition.y,d=Math.sqrt(Math.pow(o-n,2)+Math.pow(a-i,2));if(distancePrev){distancePrev<d?currentScale+=.01:(currentScale-=.01)<=1&&(currentScale=1),image.style.transform="scale("+currentScale+")"}distancePrev=d}else{var u=pointerArray[t].prevPosition.x,l=e.x,s=l-u,m=1*image.style.left.replace("px","");0<s?m+=Math.abs(s):m-=Math.abs(s),0<m&&(m=0),m<imageWindow-imageWidth&&(m=imageWindow-imageWidth),image.style.left=m+"px",pointerArray[t].prevPosition.x=l}}}),imageContainer.addEventListener("pointerup",function(e){for(var t=null,r=0;r<pointerArray.length;r++)pointerArray[r].id===e.pointerId&&(t=r);pointerArray.splice(pointerArray[t],1)}),imageContainer.addEventListener("pointercancel",moveToStartPosition);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJidXR0b25NZW51IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJkYXRhIiwiZ3JpZCIsInRlbXBsYXRlIiwibW9kdWxlVGVtcGxhdGUiLCJjb250ZW50IiwibW9kdWxlUGljdHVyZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNlbmQiLCJzdGF0dXMiLCJhbGVydCIsInN0YXR1c1RleHQiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJldmVudHMiLCJjcmVhdGVFbGVtZW50RnJvbUhUTUwiLCJodG1sU3RyaW5nIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInRyaW0iLCJmaXJzdENoaWxkIiwicGFyc2VUZW1wbGF0ZSIsInZhcmlhYmxlcyIsInJlc3VsdCIsIm91dGVySFRNTCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwicmVwbGFjZSIsImkiLCJsZW5ndGgiLCJtb2R1bGUiLCJjbG9uZU5vZGUiLCJkZXNjcmlwdGlvbiIsImFkZCIsImljb24iLCJwaWN0dXJlIiwiYXBwZW5kQ2hpbGQiLCJpbWFnZUNvbnRhaW5lciIsImltYWdlIiwiaW1hZ2VXaW5kb3ciLCJvZmZzZXRXaWR0aCIsImltYWdlV2lkdGgiLCJwb2ludGVyQXJyYXkiLCJkaXN0YW5jZVByZXYiLCJjdXJyZW50U2NhbGUiLCJzdHlsZSIsImxlZnQiLCJ0cmFuc2Zvcm0iLCJtb3ZlVG9TdGFydFBvc2l0aW9uIiwid2luZG93IiwiZXZlbnQiLCJzZXRQb2ludGVyQ2FwdHVyZSIsInBvaW50ZXJJZCIsInB1c2giLCJpZCIsInByZXZQb3NpdGlvbiIsIngiLCJ5IiwiY3VycmVudFBvc2l0aW9uIiwiaW5kZXgiLCJjdXJyZW50UG9zaXRpb25YMSIsImN1cnJlbnRQb3NpdGlvblkxIiwiY3VycmVudFBvc2l0aW9uWDIiLCJjdXJyZW50UG9zaXRpb25ZMiIsImRpc3RhbmNlIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJzdGFydFgiLCJkeCIsImFicyIsInNwbGljZSJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsV0FBYUMsU0FBU0MsY0FBYyxtQkFDcENDLEtBQU9GLFNBQVNDLGNBQWMsZ0JBRWxDRixXQUFXSSxpQkFBaUIsUUFBUyxXQUNuQ0QsS0FBS0UsVUFBVUMsT0FBTyx5QkFHeEIsSUFPSUMsS0FQQUMsS0FBT1AsU0FBU0MsY0FBYyxTQUU5Qk8sU0FBV1IsU0FBU0MsY0FBYyxtQkFFbENRLGVBQWlCRCxTQUFTRSxRQUFRVCxjQUFjLFdBQ2hEVSxjQUFnQkgsU0FBU0UsUUFBUVQsY0FBYyxvQkFJL0NXLElBQU0sSUFBSUMsZUFDZEQsSUFBSUUsS0FBSyxNQUFPLGVBQWUsR0FDL0JGLElBQUlHLE9BQ2MsS0FBZEgsSUFBSUksT0FDTkMsTUFBT0wsSUFBSUksT0FBUyxLQUFPSixJQUFJTSxZQUUvQlosS0FBT2EsS0FBS0MsTUFBTVIsSUFBSVMsY0FHeEIsSUFBSUMsT0FBU2hCLEtBQUtnQixPQUVsQixTQUFTQyxzQkFBc0JDLEdBQzdCLElBQUlDLEVBQU16QixTQUFTMEIsY0FBYyxPQUVqQyxPQURBRCxFQUFJRSxVQUFZSCxFQUFXSSxPQUNwQkgsRUFBSUksV0FHYixTQUFTQyxjQUFjdEIsRUFBVXVCLEdBQy9CLElBQUlDLEVBQVN4QixFQUFTeUIsVUFPdEIsT0FOQUMsT0FBT0MsS0FBS0osR0FBV0ssUUFBUSxTQUFVQyxHQUNoQixPQUFuQk4sRUFBVU0sS0FDWk4sRUFBVU0sR0FBTyxJQUVuQkwsRUFBU0EsRUFBT00sUUFBUSxNQUFRRCxFQUFNLE1BQU9OLEVBQVVNLE1BRWxEZCxzQkFBc0JTLEdBRy9CLElBQUssSUFBSU8sRUFBSSxFQUFHQSxFQUFJakIsT0FBT2tCLE9BQVFELElBQUssQ0FFdEMsSUFBSUUsT0FBU2hDLGVBQWVpQyxXQUFVLEdBT3RDLEdBTkFELE9BQVNYLGNBQWNyQixlQUFnQmEsT0FBT2lCLElB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Qy9CTyxFQUFRL0IsR0FJWmMsYUFBYTZCLE9BQU83QixhQUFhaUIsR0FBUSxLQUczQ3RCLGVBQWU3QyxpQkFBaUIsZ0JBQWlCd0QiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBidXR0b25NZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLW1lbnUtYnV0dG9uJyk7XG52YXIgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXItbWVudScpO1xuXG5idXR0b25NZW51LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBtZW51LmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlci1tZW51LS1vcGVuZWQnKTtcbn0pO1xuXG52YXIgZ3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkJyk7XG5cbnZhciB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2R1bGVUZW1wbGF0ZScpO1xuXG52YXIgbW9kdWxlVGVtcGxhdGUgPSB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2R1bGUnKTtcbnZhciBtb2R1bGVQaWN0dXJlID0gdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKCcubW9kdWxlX19waWN0dXJlJyk7XG5cbnZhciBkYXRhO1xuXG52YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG54aHIub3BlbignR0VUJywgJ2V2ZW50cy5qc29uJywgZmFsc2UpO1xueGhyLnNlbmQoKTtcbmlmICh4aHIuc3RhdHVzICE9IDIwMCkge1xuICBhbGVydCggeGhyLnN0YXR1cyArICc6ICcgKyB4aHIuc3RhdHVzVGV4dCApO1xufSBlbHNlIHtcbiAgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG59XG5cbnZhciBldmVudHMgPSBkYXRhLmV2ZW50cztcblxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudEZyb21IVE1MKGh0bWxTdHJpbmcpIHtcbiAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkaXYuaW5uZXJIVE1MID0gaHRtbFN0cmluZy50cmltKCk7XG4gIHJldHVybiBkaXYuZmlyc3RDaGlsZDtcbn1cblxuZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdmFyaWFibGVzKSB7XG4gIHZhciByZXN1bHQgPSB0ZW1wbGF0ZS5vdXRlckhUTUw7XG4gIE9iamVjdC5rZXlzKHZhcmlhYmxlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKHZhcmlhYmxlc1trZXldID09PSBudWxsKSB7XG4gICAgICB2YXJpYWJsZXNba2V5XSA9ICcnO1xuICAgIH1cbiAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgne3sgJyArIGtleSArICcgfX0nLCB2YXJpYWJsZXNba2V5XSk7XG4gIH0pO1xuICByZXR1cm4gY3JlYXRlRWxlbWVudEZyb21IVE1MKHJlc3VsdCk7XG59XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgdmFyIG1vZHVsZSA9IG1vZHVsZVRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgbW9kdWxlID0gcGFyc2VUZW1wbGF0ZShtb2R1bGVUZW1wbGF0ZSwgZXZlbnRzW2ldKTtcblxuICBpZiAoZXZlbnRzW2ldLmRlc2NyaXB0aW9uID09PSAnJykge1xuICAgIG1vZHVsZS5xdWVyeVNlbGVjdG9yKCcubW9kdWxlX19tZXNzYWdlJykuY2xhc3NMaXN0LmFkZCgnbW9kdWxlX19tZXNzYWdlLS1kaXNhYmxlZCcpO1xuICB9XG5cbiAgaWYgKCdkYXRhJyBpbiBldmVudHNbaV0pIHtcblxuICAgIGlmIChldmVudHNbaV0uaWNvbiA9PT0gJ2NhbScpIHtcbiAgICAgIHZhciBwaWN0dXJlID0gbW9kdWxlUGljdHVyZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBtb2R1bGUucXVlcnlTZWxlY3RvcignLm1vZHVsZV9fbWVzc2FnZScpLmFwcGVuZENoaWxkKHBpY3R1cmUpO1xuICAgIH1cblxuICB9XG5cbiAgZ3JpZC5hcHBlbmRDaGlsZChtb2R1bGUpO1xufVxuXG52YXIgaW1hZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kdWxlX19waWN0dXJlJyk7XG52YXIgaW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kdWxlX19pbWFnZScpO1xuXG52YXIgaW1hZ2VXaW5kb3cgPSBpbWFnZUNvbnRhaW5lci5vZmZzZXRXaWR0aDtcbnZhciBpbWFnZVdpZHRoID0gaW1hZ2Uub2Zmc2V0V2lkdGg7XG5cbnZhciBwb2ludGVyQXJyYXkgPSBbXTtcbnZhciBkaXN0YW5jZVByZXYgPSAwO1xudmFyIGN1cnJlbnRTY2FsZSA9IDE7XG5cbmltYWdlLnN0eWxlLmxlZnQgPSAnMHB4JztcbmltYWdlLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoXCIgKyBjdXJyZW50U2NhbGUgKyBcIilcIjtcblxudmFyIG1vdmVUb1N0YXJ0UG9zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgaW1hZ2VXaW5kb3cgPSBpbWFnZUNvbnRhaW5lci5vZmZzZXRXaWR0aDtcbiAgaW1hZ2Uuc3R5bGUubGVmdCA9ICcwcHgnO1xuXG4gIGltYWdlV2luZG93ID0gaW1hZ2VDb250YWluZXIub2Zmc2V0V2lkdGg7XG4gIGltYWdlV2lkdGggPSBpbWFnZS5vZmZzZXRXaWR0aDtcbn07XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcbiAgbW92ZVRvU3RhcnRQb3NpdGlvbigpO1xufSk7XG5cbmltYWdlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGltYWdlQ29udGFpbmVyLnNldFBvaW50ZXJDYXB0dXJlKGV2ZW50LnBvaW50ZXJJZCk7XG5cbiAgcG9pbnRlckFycmF5LnB1c2goe1xuICAgIGlkOiBldmVudC5wb2ludGVySWQsXG4gICAgcHJldlBvc2l0aW9uOiB7XG4gICAgICB4OiBldmVudC54LFxuICAgICAgeTogZXZlbnQueVxuICAgIH0sXG4gICAgY3VycmVudFBvc2l0aW9uOiB7XG4gICAgICB4OiBldmVudC54LFxuICAgICAgeTogZXZlbnQueVxuICAgIH1cbiAgfSk7XG59KTtcblxuaW1hZ2VDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgaWYgKHBvaW50ZXJBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZhciBpbmRleCA9IG51bGw7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludGVyQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocG9pbnRlckFycmF5W2ldLmlkID09PSBldmVudC5wb2ludGVySWQpIHtcbiAgICAgIGluZGV4ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHBvaW50ZXJBcnJheVtpbmRleF0uY3VycmVudFBvc2l0aW9uLnggPSBldmVudC54O1xuICBwb2ludGVyQXJyYXlbaW5kZXhdLmN1cnJlbnRQb3NpdGlvbi55ID0gZXZlbnQueTtcblxuICBpZiAocG9pbnRlckFycmF5Lmxlbmd0aCA+IDEpIHtcblxuICAgIHZhciBjdXJyZW50UG9zaXRpb25YMSA9IHBvaW50ZXJBcnJheVswXS5jdXJyZW50UG9zaXRpb24ueDtcbiAgICB2YXIgY3VycmVudFBvc2l0aW9uWTEgPSBwb2ludGVyQXJyYXlbMF0uY3VycmVudFBvc2l0aW9uLnk7XG4gICAgdmFyIGN1cnJlbnRQb3NpdGlvblgyID0gcG9pbnRlckFycmF5WzFdLmN1cnJlbnRQb3NpdGlvbi54O1xuICAgIHZhciBjdXJyZW50UG9zaXRpb25ZMiA9IHBvaW50ZXJBcnJheVsxXS5jdXJyZW50UG9zaXRpb24ueTtcblxuICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdygoY3VycmVudFBvc2l0aW9uWDIgLSBjdXJyZW50UG9zaXRpb25YMSksIDIpICsgTWF0aC5wb3coKGN1cnJlbnRQb3NpdGlvblkyIC0gY3VycmVudFBvc2l0aW9uWTEpLCAyKSk7XG5cbiAgICBpZiAoZGlzdGFuY2VQcmV2KSB7XG5cbiAgICAgIHZhciBzY2FsZSA9IDAuMDE7XG5cbiAgICAgIGlmIChkaXN0YW5jZSA+IGRpc3RhbmNlUHJldikge1xuICAgICAgICBjdXJyZW50U2NhbGUgKz0gc2NhbGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50U2NhbGUgLT0gc2NhbGU7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRTY2FsZSA8PSAxKSB7XG4gICAgICAgICAgY3VycmVudFNjYWxlID0gMTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpbWFnZS5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKFwiICsgY3VycmVudFNjYWxlICsgXCIpXCI7XG4gICAgfVxuXG4gICAgZGlzdGFuY2VQcmV2ID0gZGlzdGFuY2U7XG5cbiAgfSBlbHNlIHtcblxuICAgIHZhciBzdGFydFggPSBwb2ludGVyQXJyYXlbaW5kZXhdLnByZXZQb3NpdGlvbi54O1xuICAgIHZhciB4ID0gZXZlbnQueDtcbiAgICB2YXIgZHggPSB4IC0gc3RhcnRYO1xuICAgIHZhciBsZWZ0ID0gaW1hZ2Uuc3R5bGUubGVmdC5yZXBsYWNlKCdweCcsICcnKSAqIDE7XG5cbiAgICBkeCA+IDAgPyBsZWZ0ICs9IE1hdGguYWJzKGR4KSA6IGxlZnQgLT0gTWF0aC5hYnMoZHgpO1xuXG4gICAgaWYgKGxlZnQgPiAwKSB7XG4gICAgICBsZWZ0ID0gMDtcbiAgICB9XG5cbiAgICBpZiAobGVmdCA8IGltYWdlV2luZG93IC0gaW1hZ2VXaWR0aCkge1xuICAgICAgbGVmdCA9IGltYWdlV2luZG93IC0gaW1hZ2VXaWR0aDtcbiAgICB9XG5cbiAgICBpbWFnZS5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7XG4gICAgcG9pbnRlckFycmF5W2luZGV4XS5wcmV2UG9zaXRpb24ueCA9IHg7XG4gIH1cbn0pO1xuXG5pbWFnZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgdmFyIGluZGV4ID0gbnVsbDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50ZXJBcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwb2ludGVyQXJyYXlbaV0uaWQgPT09IGV2ZW50LnBvaW50ZXJJZCkge1xuICAgICAgaW5kZXggPSBpO1xuICAgIH1cbiAgfVxuXG4gIHBvaW50ZXJBcnJheS5zcGxpY2UocG9pbnRlckFycmF5W2luZGV4XSwgMSk7XG59KTtcblxuaW1hZ2VDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIG1vdmVUb1N0YXJ0UG9zaXRpb24pO1xuXG4iXX0=
